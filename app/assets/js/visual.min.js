/*!
 * Datadaan
 * Datavisualisation
 * https://datadaan.nl
 * @author Daan van der Zwaag
 * @version 1.0.5
 * Copyright 2017. MIT licensed.
 */
!function(){"use strict";function t(){if(!d3.event.sourceEvent||"zoom"!==d3.event.sourceEvent.type){var t=d3.event.selection||u.range();p.domain(t.map(u.invert,u)),E.select(".area").attr("d",y),E.select(".axis--x").call(h),n.select(".zoom").call(b.transform,d3.zoomIdentity.scale(i/(t[1]-t[0])).translate(-t[0],0))}}function a(){if(!d3.event.sourceEvent||"brush"!==d3.event.sourceEvent.type){var t=d3.event.transform;p.domain(t.rescaleX(u).domain()),E.select(".area").attr("d",y),E.select(".axis--x").call(h),L.select(".brush").call(x.move,p.range().map(t.invertX,t))}}function e(t){return t.date=l(t.date),t.price=+t.price,t}function r(t,a,e,r,n,s,o){function i(){c.selectAll("path").attr("transform","translate("+m(1)+")").data([u[0]]).attr("d",h).transition().ease(d3.easeLinear).duration(.95*o).attr("transform","translate("+m(0)+")")}function d(){c.selectAll("path").data([u[0]]).attr("d",h)}var c=d3.select(t).append("svg:svg").attr("width","100%").attr("height","100%"),l=[3,6,2,7,5,2,1,3,8,9,2,5,9,3,6,3,6,2,7,5,2,1,3,8,9,2,5,9,2,7,5,2,1,3,8,9,2,5,9,3,6,2,7,5,2,1,3,8,9,2,9],p=[33,76,67,74,32,82,62,1,78,4,13,88,61,26,58,42,79,69,3,19,10,91,94,20,27,8,51,87,85,65,17,77,35,37,93,36,60,63,39,73,43,75,9,66,25,49,97,90,47,70,18,41,50,34,53,23,30,92,14,84,16,95,28,31,96,68,80,21,72,99,15,83,6,64,59,54,86,12,55,71,7,22,52,24,5,29,56,2,100,98,48,11,40,57,45,81,89,38,46,44],u=[l,p],m=d3.scaleLinear().domain([0,48]).range([-5,a]),f=d3.scaleLinear().domain([0,10]).range([0,e]),h=d3.line().x(function(t,a){return m(a)}).y(function(t){return f(t)});"basis"===r&&h.curve(d3.curveCatmullRom.alpha(.5)),c.append("svg:path").attr("d",h(u[0])),setInterval(function(){var t=u[0].shift();u[0].push(t),n?i():d()},s)}var n=d3.select("#area1"),s={top:20,right:20,bottom:110,left:40},o={top:430,right:20,bottom:30,left:40},i=+n.attr("width")-s.left-s.right,d=+n.attr("height")-s.top-s.bottom,c=+n.attr("height")-o.top-o.bottom,l=d3.timeParse("%b %Y"),p=d3.scaleTime().range([0,i]),u=d3.scaleTime().range([0,i]),m=d3.scaleLinear().range([d,0]),f=d3.scaleLinear().range([c,0]),h=d3.axisBottom(p),v=d3.axisBottom(u),g=d3.axisLeft(m),x=d3.brushX().extent([[0,0],[i,c]]).on("brush end",t),b=d3.zoom().scaleExtent([1,1/0]).translateExtent([[0,0],[i,d]]).extent([[0,0],[i,d]]).on("zoom",a),y=d3.area().curve(d3.curveMonotoneX).x(function(t){return p(t.date)}).y0(d).y1(function(t){return m(t.price)}),z=d3.area().curve(d3.curveMonotoneX).x(function(t){return u(t.date)}).y0(c).y1(function(t){return f(t.price)});n.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",i).attr("height",d);var E=n.append("g").attr("class","focus").attr("transform","translate("+s.left+","+s.top+")"),L=n.append("g").attr("class","context").attr("transform","translate("+o.left+","+o.top+")");d3.csv("assets/data/sp500.csv",e,function(t,a){if(t)throw t;p.domain(d3.extent(a,function(t){return t.date})),m.domain([0,d3.max(a,function(t){return t.price})]),u.domain(p.domain()),f.domain(m.domain()),E.append("path").datum(a).attr("class","area").attr("d",y),E.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+d+")").call(h),E.append("g").attr("class","axis axis--y").call(g),L.append("path").datum(a).attr("class","area").attr("d",z),L.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+c+")").call(v),L.append("g").attr("class","brush").call(x).call(x.move,p.range()),n.append("rect").attr("class","zoom").attr("width",i).attr("height",d).attr("transform","translate("+s.left+","+s.top+")").call(b)}),r("#graph1",2e3,80,"basis",!0,1e3,1e3),r("#graph2",2e3,80,"basis",!0,1e3,1e3)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpc3VhbC5qcyJdLCJuYW1lcyI6WyJicnVzaGVkIiwiZDMiLCJldmVudCIsInNvdXJjZUV2ZW50IiwidHlwZSIsInMiLCJzZWxlY3Rpb24iLCJ4MiIsInJhbmdlIiwieCIsImRvbWFpbiIsIm1hcCIsImludmVydCIsImZvY3VzIiwic2VsZWN0IiwiYXR0ciIsImFyZWEiLCJjYWxsIiwieEF4aXMiLCJzdmciLCJ6b29tIiwidHJhbnNmb3JtIiwiem9vbUlkZW50aXR5Iiwic2NhbGUiLCJ3aWR0aCIsInRyYW5zbGF0ZSIsInpvb21lZCIsInQiLCJyZXNjYWxlWCIsImNvbnRleHQiLCJicnVzaCIsIm1vdmUiLCJpbnZlcnRYIiwiZCIsImRhdGUiLCJwYXJzZURhdGUiLCJwcmljZSIsImRpc3BsYXlTcGFya0xpbmVzIiwiaWQiLCJoZWlnaHQiLCJpbnRlcnBvbGF0aW9uIiwiYW5pbWF0ZSIsInVwZGF0ZURlbGF5IiwidHJhbnNpdGlvbkRlbGF5IiwicmVkcmF3V2l0aEFuaW1hdGlvbiIsImdyYXBoIiwic2VsZWN0QWxsIiwiZGF0YSIsImRhdGFTZXQiLCJsaW5lIiwidHJhbnNpdGlvbiIsImVhc2UiLCJlYXNlTGluZWFyIiwiZHVyYXRpb24iLCJyZWRyYXdXaXRob3V0QW5pbWF0aW9uIiwiYXBwZW5kIiwiZGF0YU9uZSIsImRhdGFUd28iLCJzY2FsZUxpbmVhciIsInkiLCJpIiwiY3VydmUiLCJjdXJ2ZUNhdG11bGxSb20iLCJhbHBoYSIsInNldEludGVydmFsIiwidiIsInNoaWZ0IiwicHVzaCIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIm1hcmdpbjIiLCJoZWlnaHQyIiwidGltZVBhcnNlIiwic2NhbGVUaW1lIiwieTIiLCJheGlzQm90dG9tIiwieEF4aXMyIiwieUF4aXMiLCJheGlzTGVmdCIsImJydXNoWCIsImV4dGVudCIsIm9uIiwic2NhbGVFeHRlbnQiLCJJbmZpbml0eSIsInRyYW5zbGF0ZUV4dGVudCIsImN1cnZlTW9ub3RvbmVYIiwieTAiLCJ5MSIsImFyZWEyIiwiY3N2IiwiZXJyb3IiLCJtYXgiLCJkYXR1bSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FDQSxXQUFBLFlBc0dBLFNBQUFBLEtBQ0EsSUFBQUMsR0FBQUMsTUFBQUMsYUFBQSxTQUFBRixHQUFBQyxNQUFBQyxZQUFBQyxLQUFBLENBQ0EsR0FBQUMsR0FBQUosR0FBQUMsTUFBQUksV0FBQUMsRUFBQUMsT0FDQUMsR0FBQUMsT0FBQUwsRUFBQU0sSUFBQUosRUFBQUssT0FBQUwsSUFDQU0sRUFBQUMsT0FBQSxTQUFBQyxLQUFBLElBQUFDLEdBQ0FILEVBQUFDLE9BQUEsWUFBQUcsS0FBQUMsR0FDQUMsRUFBQUwsT0FBQSxTQUFBRyxLQUFBRyxFQUFBQyxVQUFBcEIsR0FBQXFCLGFBQ0FDLE1BQUFDLEdBQUFuQixFQUFBLEdBQUFBLEVBQUEsS0FDQW9CLFdBQUFwQixFQUFBLEdBQUEsS0FHQSxRQUFBcUIsS0FDQSxJQUFBekIsR0FBQUMsTUFBQUMsYUFBQSxVQUFBRixHQUFBQyxNQUFBQyxZQUFBQyxLQUFBLENBQ0EsR0FBQXVCLEdBQUExQixHQUFBQyxNQUFBbUIsU0FDQVosR0FBQUMsT0FBQWlCLEVBQUFDLFNBQUFyQixHQUFBRyxVQUNBRyxFQUFBQyxPQUFBLFNBQUFDLEtBQUEsSUFBQUMsR0FDQUgsRUFBQUMsT0FBQSxZQUFBRyxLQUFBQyxHQUNBVyxFQUFBZixPQUFBLFVBQUFHLEtBQUFhLEVBQUFDLEtBQUF0QixFQUFBRCxRQUFBRyxJQUFBZ0IsRUFBQUssUUFBQUwsS0FHQSxRQUFBdkIsR0FBQTZCLEdBR0EsTUFGQUEsR0FBQUMsS0FBQUMsRUFBQUYsRUFBQUMsTUFDQUQsRUFBQUcsT0FBQUgsRUFBQUcsTUFDQUgsRUFPQSxRQUFBSSxHQUFBQyxFQUFBZCxFQUFBZSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQXdDQSxRQUFBQyxLQUVBQyxFQUFBQyxVQUFBLFFBQ0EvQixLQUFBLFlBQUEsYUFBQU4sRUFBQSxHQUFBLEtBQ0FzQyxNQUFBQyxFQUFBLEtBQ0FqQyxLQUFBLElBQUFrQyxHQUNBQyxhQUNBQyxLQUFBbEQsR0FBQW1ELFlBQ0FDLFNBQUEsSUFBQVYsR0FDQTVCLEtBQUEsWUFBQSxhQUFBTixFQUFBLEdBQUEsS0FPQSxRQUFBNkMsS0FFQVQsRUFBQUMsVUFBQSxRQUNBQyxNQUFBQyxFQUFBLEtBQ0FqQyxLQUFBLElBQUFrQyxHQTFEQSxHQUFBSixHQUFBNUMsR0FBQWEsT0FBQXdCLEdBQUFpQixPQUFBLFdBQUF4QyxLQUFBLFFBQUEsUUFBQUEsS0FBQSxTQUFBLFFBR0F5QyxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBQyxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQ0FULEdBQUFRLEVBQUFDLEdBSUFoRCxFQUFBUixHQUFBeUQsY0FBQWhELFFBQUEsRUFBQSxLQUFBRixVQUFBZ0IsSUFFQW1DLEVBQUExRCxHQUFBeUQsY0FBQWhELFFBQUEsRUFBQSxLQUFBRixPQUFBLEVBQUErQixJQUdBVSxFQUFBaEQsR0FBQWdELE9BRUF4QyxFQUFBLFNBQUF3QixFQUFBMkIsR0FJQSxNQUFBbkQsR0FBQW1ELEtBRUFELEVBQUEsU0FBQTFCLEdBSUEsTUFBQTBCLEdBQUExQixJQUVBLFdBQUFPLEdBQ0FTLEVBQUFZLE1BQUE1RCxHQUFBNkQsZ0JBQUFDLE1BQUEsS0FJQWxCLEVBQUFVLE9BQUEsWUFBQXhDLEtBQUEsSUFBQWtDLEVBQUFELEVBQUEsS0E2QkFnQixZQUFBLFdBQ0EsR0FBQUMsR0FBQWpCLEVBQUEsR0FBQWtCLE9BQ0FsQixHQUFBLEdBQUFtQixLQUFBRixHQUNBeEIsRUFDQUcsSUFFQVUsS0FFQVosR0ExTUEsR0FBQXZCLEdBQUFsQixHQUFBYSxPQUFBLFVBQ0FzRCxHQUFBQyxJQUFBLEdBQUFDLE1BQUEsR0FBQUMsT0FBQSxJQUFBQyxLQUFBLElBQ0FDLEdBQUFKLElBQUEsSUFBQUMsTUFBQSxHQUFBQyxPQUFBLEdBQUFDLEtBQUEsSUFDQWhELEdBQUFMLEVBQUFKLEtBQUEsU0FBQXFELEVBQUFJLEtBQUFKLEVBQUFFLE1BQ0EvQixHQUFBcEIsRUFBQUosS0FBQSxVQUFBcUQsRUFBQUMsSUFBQUQsRUFBQUcsT0FDQUcsR0FBQXZELEVBQUFKLEtBQUEsVUFBQTBELEVBQUFKLElBQUFJLEVBQUFGLE9BR0FwQyxFQUFBbEMsR0FBQTBFLFVBQUEsU0FFQWxFLEVBQUFSLEdBQUEyRSxZQUFBcEUsT0FBQSxFQUFBZ0IsSUFDQWpCLEVBQUFOLEdBQUEyRSxZQUFBcEUsT0FBQSxFQUFBZ0IsSUFDQW1DLEVBQUExRCxHQUFBeUQsY0FBQWxELE9BQUErQixFQUFBLElBQ0FzQyxFQUFBNUUsR0FBQXlELGNBQUFsRCxPQUFBa0UsRUFBQSxJQUVBeEQsRUFBQWpCLEdBQUE2RSxXQUFBckUsR0FDQXNFLEVBQUE5RSxHQUFBNkUsV0FBQXZFLEdBQ0F5RSxFQUFBL0UsR0FBQWdGLFNBQUF0QixHQUVBN0IsRUFBQTdCLEdBQUFpRixTQUNBQyxTQUFBLEVBQUEsSUFBQTNELEVBQUFrRCxLQUNBVSxHQUFBLFlBQUFwRixHQUVBb0IsRUFBQW5CLEdBQUFtQixPQUNBaUUsYUFBQSxFQUFBQyxFQUFBQSxJQUNBQyxrQkFBQSxFQUFBLElBQUEvRCxFQUFBZSxLQUNBNEMsU0FBQSxFQUFBLElBQUEzRCxFQUFBZSxLQUNBNkMsR0FBQSxPQUFBMUQsR0FFQVYsRUFBQWYsR0FBQWUsT0FDQTZDLE1BQUE1RCxHQUFBdUYsZ0JBQ0EvRSxFQUFBLFNBQUF3QixHQUFBLE1BQUF4QixHQUFBd0IsRUFBQUMsUUFDQXVELEdBQUFsRCxHQUNBbUQsR0FBQSxTQUFBekQsR0FBQSxNQUFBMEIsR0FBQTFCLEVBQUFHLFNBRUF1RCxFQUFBMUYsR0FBQWUsT0FDQTZDLE1BQUE1RCxHQUFBdUYsZ0JBQ0EvRSxFQUFBLFNBQUF3QixHQUFBLE1BQUExQixHQUFBMEIsRUFBQUMsUUFDQXVELEdBQUFmLEdBQ0FnQixHQUFBLFNBQUF6RCxHQUFBLE1BQUE0QyxHQUFBNUMsRUFBQUcsUUFFQWpCLEdBQUFvQyxPQUFBLFFBQUFBLE9BQUEsWUFDQXhDLEtBQUEsS0FBQSxRQUNBd0MsT0FBQSxRQUNBeEMsS0FBQSxRQUFBUyxHQUNBVCxLQUFBLFNBQUF3QixFQUVBLElBQUExQixHQUFBTSxFQUFBb0MsT0FBQSxLQUNBeEMsS0FBQSxRQUFBLFNBQ0FBLEtBQUEsWUFBQSxhQUFBcUQsRUFBQUksS0FBQSxJQUFBSixFQUFBQyxJQUFBLEtBRUF4QyxFQUFBVixFQUFBb0MsT0FBQSxLQUNBeEMsS0FBQSxRQUFBLFdBQ0FBLEtBQUEsWUFBQSxhQUFBMEQsRUFBQUQsS0FBQSxJQUFBQyxFQUFBSixJQUFBLElBRUFwRSxJQUFBMkYsSUFBQSx3QkFBQXhGLEVBQUEsU0FBQXlGLEVBQUE5QyxHQUNBLEdBQUE4QyxFQUFBLEtBQUFBLEVBRUFwRixHQUFBQyxPQUFBVCxHQUFBa0YsT0FBQXBDLEVBQUEsU0FBQWQsR0FBQSxNQUFBQSxHQUFBQyxRQUNBeUIsRUFBQWpELFFBQUEsRUFBQVQsR0FBQTZGLElBQUEvQyxFQUFBLFNBQUFkLEdBQUEsTUFBQUEsR0FBQUcsVUFDQTdCLEVBQUFHLE9BQUFELEVBQUFDLFVBQ0FtRSxFQUFBbkUsT0FBQWlELEVBQUFqRCxVQUVBRyxFQUFBMEMsT0FBQSxRQUNBd0MsTUFBQWhELEdBQ0FoQyxLQUFBLFFBQUEsUUFDQUEsS0FBQSxJQUFBQyxHQUVBSCxFQUFBMEMsT0FBQSxLQUNBeEMsS0FBQSxRQUFBLGdCQUNBQSxLQUFBLFlBQUEsZUFBQXdCLEVBQUEsS0FDQXRCLEtBQUFDLEdBRUFMLEVBQUEwQyxPQUFBLEtBQ0F4QyxLQUFBLFFBQUEsZ0JBQ0FFLEtBQUErRCxHQUVBbkQsRUFBQTBCLE9BQUEsUUFDQXdDLE1BQUFoRCxHQUNBaEMsS0FBQSxRQUFBLFFBQ0FBLEtBQUEsSUFBQTRFLEdBRUE5RCxFQUFBMEIsT0FBQSxLQUNBeEMsS0FBQSxRQUFBLGdCQUNBQSxLQUFBLFlBQUEsZUFBQTJELEVBQUEsS0FDQXpELEtBQUE4RCxHQUVBbEQsRUFBQTBCLE9BQUEsS0FDQXhDLEtBQUEsUUFBQSxTQUNBRSxLQUFBYSxHQUNBYixLQUFBYSxFQUFBQyxLQUFBdEIsRUFBQUQsU0FFQVcsRUFBQW9DLE9BQUEsUUFDQXhDLEtBQUEsUUFBQSxRQUNBQSxLQUFBLFFBQUFTLEdBQ0FULEtBQUEsU0FBQXdCLEdBQ0F4QixLQUFBLFlBQUEsYUFBQXFELEVBQUFJLEtBQUEsSUFBQUosRUFBQUMsSUFBQSxLQUNBcEQsS0FBQUcsS0ErR0FpQixFQUFBLFVBQUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxJQUFBLEtBQ0FBLEVBQUEsVUFBQSxJQUFBLEdBQUEsU0FBQSxFQUFBLElBQUEiLCJmaWxlIjoidmlzdWFsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uKCl7ICd1c2Ugc3RyaWN0JztcblxudmFyIHN2ZyA9IGQzLnNlbGVjdCgnI2FyZWExJyksXG4gICAgbWFyZ2luID0ge3RvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAxMTAsIGxlZnQ6IDQwfSxcbiAgICBtYXJnaW4yID0ge3RvcDogNDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDQwfSxcbiAgICB3aWR0aCA9ICtzdmcuYXR0cignd2lkdGgnKSAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgIGhlaWdodCA9ICtzdmcuYXR0cignaGVpZ2h0JykgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSxcbiAgICBoZWlnaHQyID0gK3N2Zy5hdHRyKCdoZWlnaHQnKSAtIG1hcmdpbjIudG9wIC0gbWFyZ2luMi5ib3R0b207XG5cblxudmFyIHBhcnNlRGF0ZSA9IGQzLnRpbWVQYXJzZSgnJWIgJVknKTtcblxudmFyIHggPSBkMy5zY2FsZVRpbWUoKS5yYW5nZShbMCwgd2lkdGhdKSxcbiAgICB4MiA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pLFxuICAgIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKSxcbiAgICB5MiA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodDIsIDBdKTtcblxudmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KSxcbiAgICB4QXhpczIgPSBkMy5heGlzQm90dG9tKHgyKSxcbiAgICB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpO1xuXG52YXIgYnJ1c2ggPSBkMy5icnVzaFgoKVxuICAgIC5leHRlbnQoW1swLCAwXSwgW3dpZHRoLCBoZWlnaHQyXV0pXG4gICAgLm9uKCdicnVzaCBlbmQnLCBicnVzaGVkKTtcblxudmFyIHpvb20gPSBkMy56b29tKClcbiAgICAuc2NhbGVFeHRlbnQoWzEsIEluZmluaXR5XSlcbiAgICAudHJhbnNsYXRlRXh0ZW50KFtbMCwgMF0sIFt3aWR0aCwgaGVpZ2h0XV0pXG4gICAgLmV4dGVudChbWzAsIDBdLCBbd2lkdGgsIGhlaWdodF1dKVxuICAgIC5vbignem9vbScsIHpvb21lZCk7XG5cbnZhciBhcmVhID0gZDMuYXJlYSgpXG4gICAgLmN1cnZlKGQzLmN1cnZlTW9ub3RvbmVYKVxuICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgoZC5kYXRlKTsgfSlcbiAgICAueTAoaGVpZ2h0KVxuICAgIC55MShmdW5jdGlvbihkKSB7IHJldHVybiB5KGQucHJpY2UpOyB9KTtcblxudmFyIGFyZWEyID0gZDMuYXJlYSgpXG4gICAgLmN1cnZlKGQzLmN1cnZlTW9ub3RvbmVYKVxuICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgyKGQuZGF0ZSk7IH0pXG4gICAgLnkwKGhlaWdodDIpXG4gICAgLnkxKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkyKGQucHJpY2UpOyB9KTtcblxuc3ZnLmFwcGVuZCgnZGVmcycpLmFwcGVuZCgnY2xpcFBhdGgnKVxuICAgIC5hdHRyKCdpZCcsICdjbGlwJylcbiAgLmFwcGVuZCgncmVjdCcpXG4gICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCk7XG5cbnZhciBmb2N1cyA9IHN2Zy5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdmb2N1cycpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5sZWZ0ICsgJywnICsgbWFyZ2luLnRvcCArICcpJyk7XG5cbnZhciBjb250ZXh0ID0gc3ZnLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2NvbnRleHQnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4yLmxlZnQgKyAnLCcgKyBtYXJnaW4yLnRvcCArICcpJyk7XG5cbmQzLmNzdignYXNzZXRzL2RhdGEvc3A1MDAuY3N2JywgdHlwZSwgZnVuY3Rpb24oZXJyb3IsIGRhdGEpIHtcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICB4LmRvbWFpbihkMy5leHRlbnQoZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5kYXRlOyB9KSk7XG4gIHkuZG9tYWluKFswLCBkMy5tYXgoZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wcmljZTsgfSldKTtcbiAgeDIuZG9tYWluKHguZG9tYWluKCkpO1xuICB5Mi5kb21haW4oeS5kb21haW4oKSk7XG5cbiAgZm9jdXMuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5kYXR1bShkYXRhKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FyZWEnKVxuICAgICAgLmF0dHIoJ2QnLCBhcmVhKTtcblxuICBmb2N1cy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBoZWlnaHQgKyAnKScpXG4gICAgICAuY2FsbCh4QXhpcyk7XG5cbiAgZm9jdXMuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzIGF4aXMtLXknKVxuICAgICAgLmNhbGwoeUF4aXMpO1xuXG4gIGNvbnRleHQuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5kYXR1bShkYXRhKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FyZWEnKVxuICAgICAgLmF0dHIoJ2QnLCBhcmVhMik7XG5cbiAgY29udGV4dC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMgYXhpcy0teCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBoZWlnaHQyICsgJyknKVxuICAgICAgLmNhbGwoeEF4aXMyKTtcblxuICBjb250ZXh0LmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAnYnJ1c2gnKVxuICAgICAgLmNhbGwoYnJ1c2gpXG4gICAgICAuY2FsbChicnVzaC5tb3ZlLCB4LnJhbmdlKCkpO1xuXG4gIHN2Zy5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3pvb20nKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5sZWZ0ICsgJywnICsgbWFyZ2luLnRvcCArICcpJylcbiAgICAgIC5jYWxsKHpvb20pO1xufSk7XG5cbmZ1bmN0aW9uIGJydXNoZWQoKSB7XG4gIGlmIChkMy5ldmVudC5zb3VyY2VFdmVudCAmJiBkMy5ldmVudC5zb3VyY2VFdmVudC50eXBlID09PSAnem9vbScpIHJldHVybjsgLy8gaWdub3JlIGJydXNoLWJ5LXpvb21cbiAgdmFyIHMgPSBkMy5ldmVudC5zZWxlY3Rpb24gfHwgeDIucmFuZ2UoKTtcbiAgeC5kb21haW4ocy5tYXAoeDIuaW52ZXJ0LCB4MikpO1xuICBmb2N1cy5zZWxlY3QoJy5hcmVhJykuYXR0cignZCcsIGFyZWEpO1xuICBmb2N1cy5zZWxlY3QoJy5heGlzLS14JykuY2FsbCh4QXhpcyk7XG4gIHN2Zy5zZWxlY3QoJy56b29tJykuY2FsbCh6b29tLnRyYW5zZm9ybSwgZDMuem9vbUlkZW50aXR5XG4gICAgICAuc2NhbGUod2lkdGggLyAoc1sxXSAtIHNbMF0pKVxuICAgICAgLnRyYW5zbGF0ZSgtc1swXSwgMCkpO1xufVxuXG5mdW5jdGlvbiB6b29tZWQoKSB7XG4gIGlmIChkMy5ldmVudC5zb3VyY2VFdmVudCAmJiBkMy5ldmVudC5zb3VyY2VFdmVudC50eXBlID09PSAnYnJ1c2gnKSByZXR1cm47IC8vIGlnbm9yZSB6b29tLWJ5LWJydXNoXG4gIHZhciB0ID0gZDMuZXZlbnQudHJhbnNmb3JtO1xuICB4LmRvbWFpbih0LnJlc2NhbGVYKHgyKS5kb21haW4oKSk7XG4gIGZvY3VzLnNlbGVjdCgnLmFyZWEnKS5hdHRyKCdkJywgYXJlYSk7XG4gIGZvY3VzLnNlbGVjdCgnLmF4aXMtLXgnKS5jYWxsKHhBeGlzKTtcbiAgY29udGV4dC5zZWxlY3QoJy5icnVzaCcpLmNhbGwoYnJ1c2gubW92ZSwgeC5yYW5nZSgpLm1hcCh0LmludmVydFgsIHQpKTtcbn1cblxuZnVuY3Rpb24gdHlwZShkKSB7XG4gIGQuZGF0ZSA9IHBhcnNlRGF0ZShkLmRhdGUpO1xuICBkLnByaWNlID0gK2QucHJpY2U7XG4gIHJldHVybiBkO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTUEFSS0xJTkVTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyogaHR0cDovL2NvZGVwZW4uaW8vbWdpbm5hcmQvcGVuL21rQkVnP2VkaXRvcnM9MTAxMCAqL1xuXG5mdW5jdGlvbiBkaXNwbGF5U3BhcmtMaW5lcyhpZCwgd2lkdGgsIGhlaWdodCwgaW50ZXJwb2xhdGlvbiwgYW5pbWF0ZSwgdXBkYXRlRGVsYXksIHRyYW5zaXRpb25EZWxheSkge1xuICAvLyBjcmVhdGUgYW4gU1ZHIGVsZW1lbnQgaW5zaWRlIHRoZSAjZ3JhcGggZGl2IHRoYXQgZmlsbHMgMTAwJSBvZiB0aGUgZGl2XG4gIHZhciBncmFwaCA9IGQzLnNlbGVjdChpZCkuYXBwZW5kKFwic3ZnOnN2Z1wiKS5hdHRyKFwid2lkdGhcIiwgXCIxMDAlXCIpLmF0dHIoXCJoZWlnaHRcIiwgXCIxMDAlXCIpO1xuXG4gIC8vIGNyZWF0ZSBzaW1wbGUgZGF0YSBhcnJheXMgdGhhdCB3ZSdsbCBwbG90IHdpdGggYSBsaW5lICh0aGlzIGFycmF5IHJlcHJlc2VudHMgb25seSB0aGUgWSB2YWx1ZXMsIFggd2lsbCBqdXN0IGJlIHRoZSBpbmRleCBsb2NhdGlvbilcbiAgdmFyIGRhdGFPbmUgPSBbMywgNiwgMiwgNywgNSwgMiwgMSwgMywgOCwgOSwgMiwgNSwgOSwgMywgNiwgMywgNiwgMiwgNywgNSwgMiwgMSwgMywgOCwgOSwgMiwgNSwgOSwgMiwgNywgNSwgMiwgMSwgMywgOCwgOSwgMiwgNSwgOSwgMywgNiwgMiwgNywgNSwgMiwgMSwgMywgOCwgOSwgMiwgOV07XG4gIHZhciBkYXRhVHdvID0gWzMzLCA3NiwgNjcsIDc0LCAzMiwgODIsIDYyLCAxLCA3OCwgNCwgMTMsIDg4LCA2MSwgMjYsIDU4LCA0MiwgNzksIDY5LCAzLCAxOSwgMTAsIDkxLCA5NCwgMjAsIDI3LCA4LCA1MSwgODcsIDg1LCA2NSwgMTcsIDc3LCAzNSwgMzcsIDkzLCAzNiwgNjAsIDYzLCAzOSwgNzMsIDQzLCA3NSwgOSwgNjYsIDI1LCA0OSwgOTcsIDkwLCA0NywgNzAsIDE4LCA0MSwgNTAsIDM0LCA1MywgMjMsIDMwLCA5MiwgMTQsIDg0LCAxNiwgOTUsIDI4LCAzMSwgOTYsIDY4LCA4MCwgMjEsIDcyLCA5OSwgMTUsIDgzLCA2LCA2NCwgNTksIDU0LCA4NiwgMTIsIDU1LCA3MSwgNywgMjIsIDUyLCAyNCwgNSwgMjksIDU2LCAyLCAxMDAsIDk4LCA0OCwgMTEsIDQwLCA1NywgNDUsIDgxLCA4OSwgMzgsIDQ2LCA0NF07XG4gIHZhciBkYXRhU2V0ID0gW2RhdGFPbmUsIGRhdGFUd29dO1xuICAvLyB2YXIgZGF0YVJhbmRvbSA9IGQzLnJhbmdlKDUwKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yYW5kb20oKSoxMH0pO1xuXG4gIC8vIFggc2NhbGUgd2lsbCBmaXQgdmFsdWVzIGZyb20gMC0xMCB3aXRoaW4gcGl4ZWxzIDAtMTAwXG4gIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDQ4XSkucmFuZ2UoWy01LCB3aWR0aF0pOyAvLyBzdGFydGluZyBwb2ludCBpcyAtNSBzbyB0aGUgZmlyc3QgdmFsdWUgZG9lc24ndCBzaG93IGFuZCBzbGlkZXMgb2ZmIHRoZSBlZGdlIGFzIHBhcnQgb2YgdGhlIHRyYW5zaXRpb25cbiAgLy8gWSBzY2FsZSB3aWxsIGZpdCB2YWx1ZXMgZnJvbSAwLTEwIHdpdGhpbiBwaXhlbHMgMC0xMDBcbiAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMTBdKS5yYW5nZShbMCwgaGVpZ2h0XSk7XG5cbiAgLy8gY3JlYXRlIGEgbGluZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBTVkcgbGluZSB3ZSdyZSBjcmVhdGluZ1xuICB2YXIgbGluZSA9IGQzLmxpbmUoKVxuICAgIC8vIGFzc2lnbiB0aGUgWCBmdW5jdGlvbiB0byBwbG90IG91ciBsaW5lIGFzIHdlIHdpc2hcbiAgICAueChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAvLyB2ZXJib3NlIGxvZ2dpbmcgdG8gc2hvdyB3aGF0J3MgYWN0dWFsbHkgYmVpbmcgZG9uZVxuICAgICAgLy8gY29uc29sZS5sb2coJ1Bsb3R0aW5nIFggdmFsdWUgZm9yIGRhdGEgcG9pbnQ6ICcgKyBkICsgJyB1c2luZyBpbmRleDogJyArIGkgKyAnIHRvIGJlIGF0OiAnICsgeChpKSArICcgdXNpbmcgb3VyIHhTY2FsZS4nKTtcbiAgICAgIC8vIHJldHVybiB0aGUgWCBjb29yZGluYXRlIHdoZXJlIHdlIHdhbnQgdG8gcGxvdCB0aGlzIGRhdGFwb2ludFxuICAgICAgcmV0dXJuIHgoaSk7XG4gICAgfSlcbiAgICAueShmdW5jdGlvbihkKSB7XG4gICAgICAvLyB2ZXJib3NlIGxvZ2dpbmcgdG8gc2hvdyB3aGF0J3MgYWN0dWFsbHkgYmVpbmcgZG9uZVxuICAgICAgLy9jb25zb2xlLmxvZygnUGxvdHRpbmcgWSB2YWx1ZSBmb3IgZGF0YSBwb2ludDogJyArIGQgKyAnIHRvIGJlIGF0OiAnICsgeShkKSArIFwiIHVzaW5nIG91ciB5U2NhbGUuXCIpO1xuICAgICAgLy8gcmV0dXJuIHRoZSBZIGNvb3JkaW5hdGUgd2hlcmUgd2Ugd2FudCB0byBwbG90IHRoaXMgZGF0YXBvaW50XG4gICAgICByZXR1cm4geShkKTtcbiAgICB9KVxuICBpZiAoaW50ZXJwb2xhdGlvbiA9PT0gXCJiYXNpc1wiKSB7XG4gICAgbGluZS5jdXJ2ZShkMy5jdXJ2ZUNhdG11bGxSb20uYWxwaGEoMC41KSlcbiAgfVxuXG4gIC8vIGRpc3BsYXkgdGhlIGxpbmUgYnkgYXBwZW5kaW5nIGFuIHN2ZzpwYXRoIGVsZW1lbnQgd2l0aCB0aGUgZGF0YSBsaW5lIHdlIGNyZWF0ZWQgYWJvdmVcbiAgZ3JhcGguYXBwZW5kKFwic3ZnOnBhdGhcIikuYXR0cihcImRcIiwgbGluZShkYXRhU2V0WzBdKSk7XG5cbiAgLy8gb3IgaXQgY2FuIGJlIGRvbmUgbGlrZSB0aGlzXG4gIC8vZ3JhcGguc2VsZWN0QWxsKFwicGF0aFwiKS5kYXRhKFtkYXRhXSkuZW50ZXIoKS5hcHBlbmQoXCJzdmc6cGF0aFwiKS5hdHRyKFwiZFwiLCBsaW5lKTtcblxuICBmdW5jdGlvbiByZWRyYXdXaXRoQW5pbWF0aW9uKCkge1xuICAgIC8vIHVwZGF0ZSB3aXRoIGFuaW1hdGlvblxuICAgIGdyYXBoLnNlbGVjdEFsbChcInBhdGhcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgeCgxKSArIFwiKVwiKSAvLyBzZXQgdGhlIHRyYW5zZm9ybSB0byB0aGUgcmlnaHQgYnkgeCgxKSBwaXhlbHMgKDYgZm9yIHRoZSBzY2FsZSB3ZSd2ZSBzZXQpIHRvIGhpZGUgdGhlIG5ldyB2YWx1ZVxuICAgICAgLmRhdGEoW2RhdGFTZXRbMF1dKSAvLyBzZXQgdGhlIG5ldyBkYXRhXG4gICAgICAuYXR0cihcImRcIiwgbGluZSkgLy8gYXBwbHkgdGhlIG5ldyBkYXRhIHZhbHVlcyAuLi4gYnV0IHRoZSBuZXcgdmFsdWUgaXMgaGlkZGVuIGF0IHRoaXMgcG9pbnQgb2ZmIHRoZSByaWdodCBvZiB0aGUgY2FudmFzXG4gICAgICAudHJhbnNpdGlvbigpIC8vIHN0YXJ0IGEgdHJhbnNpdGlvbiB0byBicmluZyB0aGUgbmV3IHZhbHVlIGludG8gdmlld1xuICAgICAgLmVhc2UoZDMuZWFzZUxpbmVhcilcbiAgICAgIC5kdXJhdGlvbih0cmFuc2l0aW9uRGVsYXkqMC45NSkgLy8gZm9yIHRoaXMgZGVtbyB3ZSB3YW50IGEgY29udGludWFsIHNsaWRlIHNvIHNldCB0aGlzIHRvIHRoZSBzYW1lIGFzIHRoZSBzZXRJbnRlcnZhbCBhbW91bnQgYmVsb3dcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgeCgwKSArIFwiKVwiKTsgLy8gYW5pbWF0ZSBhIHNsaWRlIHRvIHRoZSBsZWZ0IGJhY2sgdG8geCgwKSBwaXhlbHMgdG8gcmV2ZWFsIHRoZSBuZXcgdmFsdWVcblxuICAgIC8qIHRoYW5rcyB0byAnYmFycnltJyBmb3IgZXhhbXBsZXMgb2YgdHJhbnNmb3JtOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xMTM3MTMxICovXG4gIH1cblxuICAvLyBGYWxsYmFjayBpZiByZWRyYXdXaXRoQW5pbWF0aW9uIGRvZXNuJ3Qgd29ya1xuXG5cdCAgZnVuY3Rpb24gcmVkcmF3V2l0aG91dEFuaW1hdGlvbigpIHtcblx0ICAgIC8vIHN0YXRpYyB1cGRhdGUgd2l0aG91dCBhbmltYXRpb25cblx0ICAgIGdyYXBoLnNlbGVjdEFsbChcInBhdGhcIilcblx0ICAgICAgLmRhdGEoW2RhdGFTZXRbMF1dKSAvLyBzZXQgdGhlIG5ldyBkYXRhXG5cdCAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKTsgLy8gYXBwbHkgdGhlIG5ldyBkYXRhIHZhbHVlc1xuXHQgIH1cblxuXG4gIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gZGF0YVNldFswXS5zaGlmdCgpOyAvLyByZW1vdmUgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGFycmF5XG4gICAgZGF0YVNldFswXS5wdXNoKHYpOyAvLyBhZGQgYSBuZXcgZWxlbWVudCB0byB0aGUgYXJyYXkgKHdlJ3JlIGp1c3QgdGFraW5nIHRoZSBudW1iZXIgd2UganVzdCBzaGlmdGVkIG9mZiB0aGUgZnJvbnQgYW5kIGFwcGVuZGluZyB0byB0aGUgZW5kKVxuICAgIGlmIChhbmltYXRlKSB7XG4gICAgICByZWRyYXdXaXRoQW5pbWF0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZHJhd1dpdGhvdXRBbmltYXRpb24oKTtcbiAgICB9XG4gIH0sIHVwZGF0ZURlbGF5KTtcblxufVxuXG5cblxuZGlzcGxheVNwYXJrTGluZXMoXCIjZ3JhcGgxXCIsIDIwMDAsIDgwLCBcImJhc2lzXCIsIHRydWUsIDEwMDAsIDEwMDApO1xuZGlzcGxheVNwYXJrTGluZXMoXCIjZ3JhcGgyXCIsIDIwMDAsIDgwLCBcImJhc2lzXCIsIHRydWUsIDEwMDAsIDEwMDApO1xuXG5cbn0pKCk7XG4iXX0=
